<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1 class="m-0">Dashboard</h1>
                </div><!-- /.col -->
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item active">Dashboard v1</li>
                    </ol>
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->

    <!-- Main content -->
    <section class="content ">
        <!-- left column -->
        <div class="row col-md-12 justify-content-center align-items-center">
            <!-- jquery validation -->
            <div class="card card-primary col-md-6">
                <div class="card-header">
                    <h3 class="card-title">Quick Example <small>jQuery Validation</small></h3>
                </div>
                <!-- /.card-header -->
                <!-- form start -->
                <form id="quickForm">
                    <div class="card-body">
                        <div class="form-group">
                            <label>Product name</label>
                            <input type="text" name="product_name" id="product-name" class="form-control"
                                placeholder="Enter name">
                        </div>

                        <div class="form-group">
                            <label>Category</label>
                            <select name="category" class="form-control select2bs4" style="width: 100%;">
                                <option value="0" selected="selected">Select one</option>
                                {{#each categories}}
                                <option value="{{this.category_id}}">{{this.category_name}}</option>
                                {{/each}}
                            </select>
                        </div>
                        <div class="form-group ">
                            <label>Brand</label>
                            <select name="brand" class="form-control select2bs4" style="width: 100%;">
                                <option value="0" selected="selected">Select one</option>
                                {{#each brands}}
                                <option value="{{this.brand_id}}">{{this.brand_name}}</option>
                                {{/each}}
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">Quantity</label>
                            <input type="number" name="quantity" class="form-control" placeholder="100">
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">Price</label>
                            <input type="number" name="price" class="form-control" placeholder="20000">
                        </div>
                        <div class="form-group">
                            <label for="customFile">Product images</label>
                            <input id="fileupload" type="file" multiple="multiple" />
                            <hr />
                            <b>Live Preview</b>
                            <br />
                            <br />
                            <div class="row ml-2" id="dvPreview">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">Description</label>
                            <textarea name="summernote" id="summernote"></textarea>
                        </div>
                    </div>
                    <!-- /.card-body -->
                    <div class="card-footer">
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>
            </div>
            <!-- /.card -->
        </div>
        <!--/.col (left) -->
        <!-- right column -->
        <div class="col-md-6">

        </div>
        <!--/.col (right) -->

        <!-- /.row (main row) -->

    </section>
    <!-- /.content -->
</div>
<!-- jQuery -->
<script src="../../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- Select2 -->
<script src="../../plugins/select2/js/select2.full.min.js"></script>
<!-- Bootstrap4 Duallistbox -->
<script src="../../plugins/bootstrap4-duallistbox/jquery.bootstrap-duallistbox.min.js"></script>
<!-- InputMask -->
<script src="../../plugins/moment/moment.min.js"></script>
<script src="../../plugins/inputmask/jquery.inputmask.min.js"></script>
<!-- date-range-picker -->
<script src="../../plugins/daterangepicker/daterangepicker.js"></script>
<!-- bootstrap color picker -->
<script src="../../plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="../../plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Bootstrap Switch -->
<script src="../../plugins/bootstrap-switch/js/bootstrap-switch.min.js"></script>
<!-- BS-Stepper -->
<script src="../../plugins/bs-stepper/js/bs-stepper.min.js"></script>
<!-- dropzonejs -->
<script src="../../plugins/dropzone/min/dropzone.min.js"></script>
<!-- jquery-validation -->
<script src="../../plugins/jquery-validation/jquery.validate.min.js"></script>
<script src="../../plugins/jquery-validation/additional-methods.min.js"></script>

<!-- Summernote -->
<script src="../../plugins/summernote/summernote-bs4.min.js"></script>

    <script language="javascript" type="text/javascript">
        window.onload = function () {
            var fileUpload = document.getElementById("fileupload");
            fileUpload.onchange = function () {
                if (typeof (FileReader) != "undefined") {
                    var dvPreview = document.getElementById("dvPreview");
                    dvPreview.innerHTML = "";
                    var regex = /^([a-zA-Z0-9\s_\\.\-:])+(.jpg|.jpeg|.gif|.png|.bmp)$/;
                    for (var i = 0; i < fileUpload.files.length; i++) {
                        var file = fileUpload.files[i];
                        if (regex.test(file.name.toLowerCase())) {
                            var reader = new FileReader();
                            reader.onload = function (e) {
                                var img = document.createElement("IMG");
                                img.height = "100";
                                img.width = "100";
                                img.src = e.target.result;
                                dvPreview.appendChild(img);
                            }
                            reader.readAsDataURL(file);
                        } else {
                            alert(file.name + " is not a valid image file.");
                            dvPreview.innerHTML = "";
                            return false;
                        }
                    }
                } else {
                    alert("This browser does not support HTML5 FileReader.");
                }
            }
        };
    </script>
<script>
    $(function () {
        //Initialize Select2 Elements
        $('.select2').select2()

        //Initialize Select2 Elements
        $('.select2bs4').select2({
            theme: 'bootstrap4'
        })
        // Summernote
        $('#summernote').summernote()
        // set
        var markupStr = "Please enter description !";
        $('#summernote').summernote('code', markupStr);




        $.validator.setDefaults({
            submitHandler: function () {

                // get value
                var product_name = $('#quickForm').find('input[name="product_name"]').val();
                var category = $('#quickForm').find('select[name="category"]').val();
                var brand = $('#quickForm').find('select[name="brand"]').val();
                var quantity = $('#quickForm').find('input[name="quantity"]').val();
                var price = $('#quickForm').find('input[name="price"]').val();
                var description = $('#summernote').summernote('code');
                console.log("::::::::::" + product_name)
                console.log("::::::::::" + category)
                console.log("::::::::::" + brand)
                console.log("::::::::::" + quantity)
                console.log("::::::::::" + price)
                console.log("::::::::::" + description)


                alert("Form successful submitted!");
            }
        });

        $('#quickForm').validate({
            rules: {
                product_name: {
                    required: true,
                },
                price: {
                    required: true,
                },
                quantity: {
                    required: true,
                },
                category: {
                    selectcheckcategory: true
                },
                brand: {
                    selectcheckbrand: true
                },
            },
            messages: {
                product_name: {
                    required: "Please enter product name !",

                },
                price: {
                    required: "Please enter price !",
                }, quantity: {
                    required: "Please enter quantity !",
                }

            },
            errorElement: 'span',
            errorPlacement: function (error, element) {
                error.addClass('invalid-feedback');
                element.closest('.form-group').append(error);
            },
            highlight: function (element, errorClass, validClass) {
                $(element).addClass('is-invalid');
            },
            unhighlight: function (element, errorClass, validClass) {
                $(element).removeClass('is-invalid');
            }
        });
        jQuery.validator.addMethod('selectcheckcategory', function (value) {
            return (value != '0');
        }, "Select category !");
        jQuery.validator.addMethod('selectcheckbrand', function (value) {
            return (value != '0');
        }, " Select brand !");



    });

</script>